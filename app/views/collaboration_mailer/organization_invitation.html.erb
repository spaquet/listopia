<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;">
  <div style="background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <!-- Header -->
    <div style="border-bottom: 2px solid #3b82f6; padding-bottom: 20px; margin-bottom: 20px;">
      <h1 style="color: #1f2937; margin: 0; font-size: 24px;">Join <%= @organization.name %></h1>
    </div>

    <!-- Content -->
    <div style="color: #4b5563; line-height: 1.6;">
      <% if @membership.present? %>
        <!-- Existing user added to organization -->
        <p>Hi <%= @user.name %>,</p>
        <p><strong><%= @inviter_name %></strong> has added you to <strong><%= @organization.name %></strong> on Listopia.</p>

        <p>You can now:</p>
        <ul style="margin: 15px 0; padding-left: 20px;">
          <li>View and manage lists in the organization</li>
          <li>Collaborate with team members</li>
          <li>Access shared resources</li>
        </ul>

        <div style="text-align: center; margin: 30px 0;">
          <a href="<%= @organization_url %>" style="display: inline-block; background-color: #3b82f6; color: white; padding: 12px 30px; border-radius: 6px; text-decoration: none; font-weight: bold;">
            Go to <%= @organization.name %>
          </a>
        </div>
      <% else %>
        <!-- New user invitation -->
        <p>Hi there,</p>
        <p><strong><%= @inviter_name %></strong> has invited you to join <strong><%= @organization.name %></strong> on Listopia.</p>

        <p>Listopia is a collaborative list management platform that makes it easy to:</p>
        <ul style="margin: 15px 0; padding-left: 20px;">
          <li>Create and manage lists with your team</li>
          <li>Collaborate in real-time</li>
          <li>Keep everyone organized and on the same page</li>
        </ul>

        <p style="margin-top: 20px;">You can accept this invitation in two ways:</p>
        <ol style="margin: 15px 0; padding-left: 20px;">
          <li>Sign up for a new account with this email address</li>
          <li>If you already have a Listopia account, log in and accept the invitation</li>
        </ol>

        <div style="text-align: center; margin: 30px 0;">
          <a href="<%= @accept_url %>" style="display: inline-block; background-color: #3b82f6; color: white; padding: 12px 30px; border-radius: 6px; text-decoration: none; font-weight: bold; margin-right: 10px;">
            Accept Invitation
          </a>
          <a href="<%= @signup_url %>" style="display: inline-block; background-color: #6b7280; color: white; padding: 12px 30px; border-radius: 6px; text-decoration: none; font-weight: bold;">
            Sign Up
          </a>
        </div>

        <p style="font-size: 12px; color: #9ca3af; margin-top: 20px;">
          Or copy and paste this link in your browser:<br/>
          <a href="<%= @accept_url %>" style="color: #3b82f6; text-decoration: none; word-break: break-all;">
            <%= @accept_url %>
          </a>
        </p>
      <% end %>
    </div>

    <!-- Footer -->
    <div style="border-top: 1px solid #e5e7eb; margin-top: 30px; padding-top: 20px; font-size: 12px; color: #9ca3af;">
      <p>If you didn't expect this invitation, you can safely ignore this email.</p>
      <p>Â© Listopia. All rights reserved.</p>
    </div>
  </div>
</div>
