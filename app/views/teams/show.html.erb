<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-900"><%= @team.name %></h1>
      <p class="mt-2 text-gray-600">Team in <%= @organization.name %></p>
    </div>
    <div class="flex gap-2">
      <%= link_to "â† Back", organization_teams_path(@organization), class: "px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg" %>
      <% if policy(@team).update? %>
        <%= link_to "Edit", edit_organization_team_path(@organization, @team), class: "px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg" %>
      <% end %>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <div class="text-sm text-gray-600">Members</div>
      <div class="text-3xl font-bold text-gray-900"><%= @team.users.count %></div>
    </div>
    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <div class="text-sm text-gray-600">Lists</div>
      <div class="text-3xl font-bold text-gray-900"><%= @team.lists.count %></div>
    </div>
    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <div class="text-sm text-gray-600">Created</div>
      <div class="text-lg font-bold text-gray-900"><%= @team.created_at.strftime("%b %d, %Y") %></div>
    </div>
  </div>

  <div class="bg-white rounded-lg border border-gray-200 p-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Team Details</h2>
    <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <dt class="text-sm font-medium text-gray-600">Team Name</dt>
        <dd class="mt-1 text-gray-900"><%= @team.name %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-gray-600">Slug</dt>
        <dd class="mt-1 text-gray-900"><%= @team.slug %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-gray-600">Created By</dt>
        <dd class="mt-1 text-gray-900"><%= @team.creator.name %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-gray-600">Organization</dt>
        <dd class="mt-1 text-gray-900"><%= @organization.name %></dd>
      </div>
    </dl>
  </div>

  <% if policy(@team).manage_members? %>
    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-900">Team Members</h2>
        <%= link_to "Add Member", new_organization_team_member_path(@organization, @team), class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm" %>
      </div>

      <% if @team.users.any? %>
        <table class="w-full">
          <thead>
            <tr class="border-b border-gray-200 bg-gray-50">
              <th class="px-6 py-3 text-left text-sm font-semibold text-gray-900">Name</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-gray-900">Email</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-gray-900">Role</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-gray-900">Joined</th>
              <th class="px-6 py-3 text-right text-sm font-semibold text-gray-900">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @team.team_memberships.order(created_at: :desc).each do |membership| %>
              <tr class="border-b border-gray-200 last:border-0 hover:bg-gray-50">
                <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= membership.user.name %></td>
                <td class="px-6 py-4 text-sm text-gray-600"><%= membership.user.email %></td>
                <td class="px-6 py-4 text-sm">
                  <span class="px-3 py-1 text-xs font-medium rounded-full <%= membership.role == 'admin' ? 'bg-purple-100 text-purple-800' : membership.role == 'lead' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800' %>">
                    <%= membership.role.titleize %>
                  </span>
                </td>
                <td class="px-6 py-4 text-sm text-gray-600"><%= membership.created_at.strftime("%b %d, %Y") %></td>
                <td class="px-6 py-4 text-right">
                  <div class="flex items-center justify-end gap-3">
                    <%= button_to "Edit Role", update_role_organization_team_member_path(@organization, @team, membership), method: :patch, form: { class: "inline" }, class: "text-sm text-blue-600 hover:text-blue-800 bg-none border-0 cursor-pointer p-0 font-semibold" %>
                    <%= button_to "Remove", remove_organization_team_member_path(@organization, @team, membership), method: :delete, form: { data: { turbo_confirm: "Are you sure?" }, class: "inline" }, class: "text-sm text-red-600 hover:text-red-800 bg-none border-0 cursor-pointer p-0 font-semibold" %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <div class="px-6 py-12 text-center">
          <p class="text-gray-600 mb-4">No members in this team yet.</p>
          <%= link_to "Add the first member", new_organization_team_member_path(@organization, @team), class: "text-blue-600 hover:text-blue-800 font-medium" %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="flex gap-2">
    <% if policy(@team).destroy? %>
      <%= link_to "Delete Team", organization_team_path(@organization, @team), method: :delete, data: { confirm: "Are you sure? This action cannot be undone." }, class: "px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700" %>
    <% end %>
  </div>
</div>
