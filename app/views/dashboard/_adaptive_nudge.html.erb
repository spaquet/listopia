<!-- app/views/dashboard/_adaptive_nudge.html.erb -->
<div class="space-y-4">
  <!-- Main Nudge Message -->
  <div class="p-4 rounded-lg bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500">
    <div class="flex items-start space-x-3">
      <div class="flex-shrink-0 mt-0.5">
        <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </div>
      <div class="flex-1">
        <h4 class="font-semibold text-gray-900">Let's get back on track!</h4>
        <p class="text-sm text-gray-700 mt-1">
          You've been away for a bit. Here are the lists that could use your attention.
        </p>
      </div>
    </div>
  </div>
  <!-- Recommendations with Nudge Context -->
  <div class="space-y-3">
    <% if recommendations.any? %>
      <% recommendations.first(3).each do |rec| %>
        <div class="group p-3 bg-gradient-to-r from-white to-gray-50 
                    rounded-lg border-2 border-gray-200 hover:border-orange-300 
                    transition-all hover:shadow-md">
          <!-- List Title -->
          <div class="flex items-start justify-between mb-2">
            <div class="flex-1">
              <%= link_to rec[:list_title], list_path(rec[:list_id]),
                          class: "font-medium text-gray-900 hover:text-orange-600 transition-colors truncate" %>
              <p class="text-xs text-gray-500 mt-0.5">
                <%= rec[:reason] %>
              </p>
            </div>
            <!-- Spotlight Arrow -->
            <%= link_to dashboard_focus_list_path(list_id: rec[:list_id], mode: :spotlight, format: :turbo_stream),
                        data: { turbo_stream: true },
                        class: "ml-2 flex-shrink-0 p-1 hover:bg-orange-50 rounded transition-all" do %>
              <svg class="w-4 h-4 text-gray-400 group-hover:text-orange-600 transition-colors" 
                   fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            <% end %>
          </div>
          <!-- Progress Bar -->
          <div class="mb-2">
            <div class="w-full bg-gray-300 rounded-full h-1.5">
              <div class="bg-gradient-to-r from-orange-400 to-red-500 h-1.5 rounded-full transition-all" 
                   style="width: <%= rec[:completion_rate] %>%"></div>
            </div>
          </div>
          <!-- Stats -->
          <div class="flex items-center justify-between text-xs text-gray-600">
            <span>
              <span class="font-medium text-gray-900"><%= rec[:pending_count] %></span> pending items
            </span>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="text-center py-8">
        <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-sm text-gray-500">Great news! All your lists are up to date.</p>
      </div>
    <% end %>
  </div>
  <!-- Motivation -->
  <div class="p-3 rounded-lg bg-blue-50 border border-blue-200">
    <p class="text-xs text-blue-700 text-center">
      ðŸ’ª You've got this! Starting with just one item can build momentum.
    </p>
  </div>
</div>